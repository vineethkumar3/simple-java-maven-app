# Maven
# Build your Java project and run tests with Apache Maven.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/java

trigger:
- master

pool:
  name: Release

stages:
- stage: Build
  displayName: 'Building jar'
  jobs:
  - job: BuildJar
    displayName: 'Running the job to build the jar'
    pool:
      name: Release

    steps:
    - script: |
        mvn clean package
        cp target/my-app-1.0-SNAPSHOT.jar $(Build.ArtifactStagingDirectory)
      displayName: 'Jar build'
    - task: PublishPipelineArtifact@1
      inputs:
        targetPath: '$(Build.ArtifactStagingDirectory)'
        artifact: 'Buildjar'  # Specify a unique artifact name
        displayName: 'Publish Buildjar artifact'
